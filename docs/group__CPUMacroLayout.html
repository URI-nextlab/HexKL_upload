<!-- HTML header for doxygen 1.14.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HexKL: Data Layout Transformation Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">HexKL<span id="projectnumber">&#160;1.0 beta 1</span>
   </div>
   <div id="projectbrief">HexKL Public C API Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('group__CPUMacroLayout.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Data Layout Transformation Functions <div class="ingroups"><a class="el" href="group__HexKLCPUMacro.html">HexKL CPU Macro API</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Defines functions for transforming between data layouts including row-major and HMX optimized formats.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga83ebc2529010ca7c5b5d3655079030eb" id="r_ga83ebc2529010ca7c5b5d3655079030eb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga83ebc2529010ca7c5b5d3655079030eb">sdkl_cpu_rm_to_ah_f16_inplace</a> (size_t n_row, size_t n_col, _Float16 *X)</td></tr>
<tr class="memdesc:ga83ebc2529010ca7c5b5d3655079030eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Applies the AH (activation layout for HMX unit) data layout to input activations in-place.  <br /></td></tr>
<tr class="memitem:ga63ce408806d510615f60ddd55f7e6deb" id="r_ga63ce408806d510615f60ddd55f7e6deb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga63ce408806d510615f60ddd55f7e6deb">sdkl_cpu_rm_to_wh_f16_inplace</a> (size_t n_row, size_t n_col, _Float16 *W)</td></tr>
<tr class="memdesc:ga63ce408806d510615f60ddd55f7e6deb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Applies the WH (weight layout for HMX unit) data layout to weights in-place.  <br /></td></tr>
<tr class="memitem:ga8d583287a9f0bb44627dbc5f998c45f5" id="r_ga8d583287a9f0bb44627dbc5f998c45f5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga8d583287a9f0bb44627dbc5f998c45f5">sdkl_cpu_rm_to_wh_i8_inplace</a> (size_t n_row, size_t n_col, int8_t *W)</td></tr>
<tr class="memdesc:ga8d583287a9f0bb44627dbc5f998c45f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Applies the WH (weight layout for HMX unit) data layout to weights in-place.  <br /></td></tr>
<tr class="memitem:gaf6e54753f885e557e1ba5ea4d9e93e2f" id="r_gaf6e54753f885e557e1ba5ea4d9e93e2f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaf6e54753f885e557e1ba5ea4d9e93e2f">sdkl_cpu_rm_to_wh_i8</a> (size_t n_inner, size_t n_row, const uint8_t *X_i8_cpu, uint8_t *Xq)</td></tr>
<tr class="memdesc:gaf6e54753f885e557e1ba5ea4d9e93e2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a row-major matrix to WH layout for HMX unit.  <br /></td></tr>
<tr class="memitem:ga5aea2be3366808ed5b7ed3958913624d" id="r_ga5aea2be3366808ed5b7ed3958913624d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga5aea2be3366808ed5b7ed3958913624d">sdkl_cpu_ui8i8_ah_to_i32_rm</a> (size_t n_row, size_t n_col, int32_t *A_i32_tmp, int32_t *A)</td></tr>
<tr class="memdesc:ga5aea2be3366808ed5b7ed3958913624d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts matrix multiplication output from HMX layout to standard row-major layout (ui8i8 variant).  <br /></td></tr>
<tr class="memitem:ga0703071ebc1f94033dddfc77b3d692ee" id="r_ga0703071ebc1f94033dddfc77b3d692ee"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga0703071ebc1f94033dddfc77b3d692ee">sdkl_cpu_ui8i4_ah_to_i32_rm</a> (size_t n_row, size_t n_col, int32_t *A_i32_hmx, int32_t *A_i32_cpu)</td></tr>
<tr class="memdesc:ga0703071ebc1f94033dddfc77b3d692ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts matrix multiplication output from HMX layout to standard row-major layout (ui8i4 variant).  <br /></td></tr>
<tr class="memitem:ga62dbacd44d85822b3508d20c20c23055" id="r_ga62dbacd44d85822b3508d20c20c23055"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga62dbacd44d85822b3508d20c20c23055">sdkl_cpu_ah_to_rm_f16_inplace</a> (size_t n_row, size_t n_col, _Float16 *A)</td></tr>
<tr class="memdesc:ga62dbacd44d85822b3508d20c20c23055"><td class="mdescLeft">&#160;</td><td class="mdescRight">Recovers the row-major layout from AH (activation layout for HMX unit) in-place.  <br /></td></tr>
<tr class="memitem:gab50d7525012611dbffeb5a67bd41d3e0" id="r_gab50d7525012611dbffeb5a67bd41d3e0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gab50d7525012611dbffeb5a67bd41d3e0">sdkl_cpu_rm_to_wh_i4</a> (uint8_t *full_wt_tiled, int8_t *wt_old, size_t wt_rows, size_t wt_cols)</td></tr>
<tr class="memdesc:gab50d7525012611dbffeb5a67bd41d3e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a row-major i4 matrix to WH layout for HMX unit.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<p>Defines functions for transforming between data layouts including row-major and HMX optimized formats. </p>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="ga62dbacd44d85822b3508d20c20c23055" name="ga62dbacd44d85822b3508d20c20c23055"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga62dbacd44d85822b3508d20c20c23055">&#9670;&#160;</a></span>sdkl_cpu_ah_to_rm_f16_inplace()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sdkl_cpu_ah_to_rm_f16_inplace </td>
          <td>(</td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>n_row</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>n_col</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">_Float16 *</td>          <td class="paramname"><span class="paramname"><em>A</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Recovers the row-major layout from AH (activation layout for HMX unit) in-place. </p>
<p>This function transforms the input matrix <span class="tt">A</span> from the AH layout back to standard row-major (RM) layout. The transformation is performed in-place, reversing the spatial reorganization applied for NPU execution.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">n_row</td><td>Number of rows in the activation matrix. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n_col</td><td>Number of columns in the activation matrix. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">A</td><td>Pointer to the activation matrix stored in AH layout. The matrix is expected to be of size <span class="tt">n_row * n_col</span> and contain <span class="tt">_Float16</span> values.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><span class="tt">AEE_SUCCESS</span> on successful transformation.</li>
<li>Error codes defined in <span class="tt">AEEStdErr.h</span> (e.g., <span class="tt">AEE_EFAILED</span>, <span class="tt">AEE_EBADPARM</span>, etc.) in case of failure.</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function assumes that the input buffer <span class="tt">A</span> is mutable and properly aligned. </dd></dl>

</div>
</div>
<a id="ga83ebc2529010ca7c5b5d3655079030eb" name="ga83ebc2529010ca7c5b5d3655079030eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga83ebc2529010ca7c5b5d3655079030eb">&#9670;&#160;</a></span>sdkl_cpu_rm_to_ah_f16_inplace()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sdkl_cpu_rm_to_ah_f16_inplace </td>
          <td>(</td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>n_row</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>n_col</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">_Float16 *</td>          <td class="paramname"><span class="paramname"><em>X</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Applies the AH (activation layout for HMX unit) data layout to input activations in-place. </p>
<p>This function transforms the input matrix <span class="tt">X</span> from row-major (RM) layout to the AH layout used by the HMX unit. The transformation is performed in-place, modifying the contents of <span class="tt">X</span> directly.</p>
<p>The AH layout is optimized for NPU execution and must be applied before passing activations to HMX-based operators. The input buffer must be allocated using <span class="tt"><a class="el" href="group__CPUMacroGeneral.html#gace62fcef6698d3088ef8eb6a9665071f" title="Allocates a shared CPU-NPU buffer.">sdkl_npu_alloc()</a></span> to ensure proper alignment and compatibility with HMX unit's memory requirements.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">n_row</td><td>Number of rows in the input matrix. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n_col</td><td>Number of columns in the input matrix. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">X</td><td>Pointer to the input matrix stored in row-major order. The matrix is expected to be of size <span class="tt">n_row * n_col</span> and contain <span class="tt">_Float16</span> values.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><span class="tt">AEE_SUCCESS</span> on successful transformation.</li>
<li>Error codes defined in <span class="tt">AEEStdErr.h</span> (e.g., <span class="tt">AEE_EFAILED</span>, <span class="tt">AEE_EBADPARM</span>, etc.) in case of failure.</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function assumes that the input buffer <span class="tt">X</span> is mutable and properly aligned. </dd></dl>

</div>
</div>
<a id="ga63ce408806d510615f60ddd55f7e6deb" name="ga63ce408806d510615f60ddd55f7e6deb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga63ce408806d510615f60ddd55f7e6deb">&#9670;&#160;</a></span>sdkl_cpu_rm_to_wh_f16_inplace()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sdkl_cpu_rm_to_wh_f16_inplace </td>
          <td>(</td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>n_row</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>n_col</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">_Float16 *</td>          <td class="paramname"><span class="paramname"><em>W</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Applies the WH (weight layout for HMX unit) data layout to weights in-place. </p>
<p>This function transforms the input weight matrix <span class="tt">W</span> from row-major (RM) layout to the WH layout required by the HMX unit. The transformation is performed in-place and prepares the weights for optimized execution on the NPU.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">n_row</td><td>Number of rows in the input weight matrix. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n_col</td><td>Number of columns in the input weight matrix. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">W</td><td>Pointer to the input weight matrix stored in row-major order. The matrix is expected to be of size <span class="tt">n_row * n_col</span> and contain <span class="tt">_Float16</span> values.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><span class="tt">AEE_SUCCESS</span> on successful transformation.</li>
<li>Error codes defined in <span class="tt">AEEStdErr.h</span> (e.g., <span class="tt">AEE_EFAILED</span>, <span class="tt">AEE_EBADPARM</span>, etc.) in case of failure.</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function assumes that the input buffer <span class="tt">W</span> is mutable and properly aligned. </dd></dl>

</div>
</div>
<a id="gab50d7525012611dbffeb5a67bd41d3e0" name="gab50d7525012611dbffeb5a67bd41d3e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab50d7525012611dbffeb5a67bd41d3e0">&#9670;&#160;</a></span>sdkl_cpu_rm_to_wh_i4()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sdkl_cpu_rm_to_wh_i4 </td>
          <td>(</td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>full_wt_tiled</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t *</td>          <td class="paramname"><span class="paramname"><em>wt_old</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>wt_rows</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>wt_cols</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts a row-major i4 matrix to WH layout for HMX unit. </p>
<p>This function transforms an input matrix from standard row-major layout containing i4 values (stored as int8_t with one i4 value per byte, sign-extended) to the specialized WH (Weight-Hexagon) layout required by the NPU matrix multiplication unit.</p>
<p>The input i4 format expects:</p><ul>
<li>Each i4 value is stored in a separate int8_t byte</li>
<li>Values are sign-extended: valid range is -8 to +7</li>
<li>Only the lower 4 bits contain the actual i4 value</li>
<li>Values are arranged in standard row-major order</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">full_wt_tiled</td><td>Pointer to output buffer in WH layout. Size must be at least <span class="tt">((wt_rows + 31) / 32) * ((wt_cols + 31) / 32) * 512</span> bytes. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">wt_old</td><td>Pointer to input matrix in row-major layout. Each element contains one i4 value stored as int8_t (sign-extended). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">wt_rows</td><td>Number of rows in input matrix. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">wt_cols</td><td>Number of columns in input matrix.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>AEE_SUCCESS on success, error code on failure</dd></dl>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>Input values must be in the range [-8, +7] (valid i4 range)</li>
<li>Output buffer must be properly aligned and sized for the tiled format</li>
<li>The transformation is optimized for NPU hardware </li>
</ul>
</dd></dl>

</div>
</div>
<a id="gaf6e54753f885e557e1ba5ea4d9e93e2f" name="gaf6e54753f885e557e1ba5ea4d9e93e2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf6e54753f885e557e1ba5ea4d9e93e2f">&#9670;&#160;</a></span>sdkl_cpu_rm_to_wh_i8()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sdkl_cpu_rm_to_wh_i8 </td>
          <td>(</td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>n_inner</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>n_row</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *</td>          <td class="paramname"><span class="paramname"><em>X_i8_cpu</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>Xq</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts a row-major matrix to WH layout for HMX unit. </p>
<p>This function transforms the input matrix <span class="tt">X_i8_cpu</span>, stored in standard row-major format, into the WH layout required by the HMX unit.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">n_inner</td><td>Number of columns in the input matrix. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n_row</td><td>Number of rows in the input matrix. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">X_i8_cpu</td><td>Pointer to the input matrix stored in row-major order. The matrix is expected to be of size <span class="tt">n_row * n_inner</span> and contain <span class="tt">uint8_t</span> values. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">Xq</td><td>Pointer to the output buffer where the WH-formatted matrix will be stored. The buffer must be preallocated and large enough to hold the transformed data.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><span class="tt">AEE_SUCCESS</span> on successful transformation.</li>
<li>Error codes defined in <span class="tt">AEEStdErr.h</span> (e.g., <span class="tt">AEE_EFAILED</span>, <span class="tt">AEE_EBADPARM</span>, etc.) in case of failure.</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function assumes that both input and output buffers are valid and properly aligned. </dd></dl>

</div>
</div>
<a id="ga8d583287a9f0bb44627dbc5f998c45f5" name="ga8d583287a9f0bb44627dbc5f998c45f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8d583287a9f0bb44627dbc5f998c45f5">&#9670;&#160;</a></span>sdkl_cpu_rm_to_wh_i8_inplace()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sdkl_cpu_rm_to_wh_i8_inplace </td>
          <td>(</td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>n_row</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>n_col</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t *</td>          <td class="paramname"><span class="paramname"><em>W</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Applies the WH (weight layout for HMX unit) data layout to weights in-place. </p>
<p>This function transforms the input weight matrix <span class="tt">W</span> from row-major (RM) layout to the WH layout required by the HMX unit. The transformation is performed in-place and prepares the weights for optimized execution on the NPU.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">n_row</td><td>Number of rows in the input matrix. </td></tr>
    <tr><td class="paramname">n_col</td><td>Number of columns in the input matrix. </td></tr>
    <tr><td class="paramname">W</td><td>Pointer to the input matrix stored in row-major order. The matrix is expected to be of size <span class="tt">n_row * n_col</span> and contain <span class="tt">int8_t</span> values.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><span class="tt">AEE_SUCCESS</span> on successful transformation.</li>
<li>Error codes defined in <span class="tt">AEEStdErr.h</span> (e.g., <span class="tt">AEE_EFAILED</span>, <span class="tt">AEE_EBADPARM</span>, etc.) in case of failure.</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function assumes that the input buffer <span class="tt">W</span> is mutable and properly aligned. </dd></dl>

</div>
</div>
<a id="ga0703071ebc1f94033dddfc77b3d692ee" name="ga0703071ebc1f94033dddfc77b3d692ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0703071ebc1f94033dddfc77b3d692ee">&#9670;&#160;</a></span>sdkl_cpu_ui8i4_ah_to_i32_rm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sdkl_cpu_ui8i4_ah_to_i32_rm </td>
          <td>(</td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>n_row</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>n_col</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t *</td>          <td class="paramname"><span class="paramname"><em>A_i32_hmx</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t *</td>          <td class="paramname"><span class="paramname"><em>A_i32_cpu</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts matrix multiplication output from HMX layout to standard row-major layout (ui8i4 variant). </p>
<p>This function transforms the output matrix from ui8i4 matrix multiplication operations from the HMX back to standard row-major CPU layout.</p>
<p>This function is typically called after NPU ui8i4 matrix multiplication operations to convert results back to a format suitable for CPU processing.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">n_row</td><td>Number of rows in the matrix. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n_col</td><td>Number of columns in the matrix. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">A_i32_hmx</td><td>Pointer to the input matrix in HMX. The matrix contains i32 values organized in 64×32 blocks. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">A_i32_cpu</td><td>Pointer to the output matrix in standard row-major layout. The buffer must be preallocated with size <span class="tt">n_row * n_col * sizeof(int32_t)</span>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><span class="tt">AEE_SUCCESS</span> on successful transformation.</li>
<li><span class="tt">AEE_EBADCLASS</span> if either input pointer is NULL.</li>
<li>Error codes defined in <span class="tt">AEEStdErr.h</span> in case of other failures.</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Both input and output buffers must be properly allocated and aligned. The function assumes the input matrix follows the exact HMX format as produced by NPU ui8i4 matrix multiplication operations.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>The caller is responsible for ensuring that both buffers have sufficient space for the matrix data. Buffer overruns will result in undefined behavior. </dd></dl>

</div>
</div>
<a id="ga5aea2be3366808ed5b7ed3958913624d" name="ga5aea2be3366808ed5b7ed3958913624d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5aea2be3366808ed5b7ed3958913624d">&#9670;&#160;</a></span>sdkl_cpu_ui8i8_ah_to_i32_rm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sdkl_cpu_ui8i8_ah_to_i32_rm </td>
          <td>(</td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>n_row</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>n_col</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t *</td>          <td class="paramname"><span class="paramname"><em>A_i32_tmp</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t *</td>          <td class="paramname"><span class="paramname"><em>A</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts matrix multiplication output from HMX layout to standard row-major layout (ui8i8 variant). </p>
<p>This function transforms the output matrix from ui8i8 matrix multiplication operations from the HMX activation layout back to standard row-major CPU layout.</p>
<p>This function is typically called after NPU ui8i8 matrix multiplication operations to convert results back to a format suitable for CPU processing.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">n_row</td><td>Number of rows in the matrix. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n_col</td><td>Number of columns in the matrix. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">A_i32_tmp</td><td>Pointer to the input matrix in HMX activation layout. The matrix contains i32 values organized in 64×32 blocks. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">A</td><td>Pointer to the output matrix in standard row-major layout. The buffer must be preallocated with size <span class="tt">n_row * n_col * sizeof(int32_t)</span>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><span class="tt">AEE_SUCCESS</span> on successful transformation.</li>
<li><span class="tt">AEE_EBADCLASS</span> if either input pointer is NULL.</li>
<li>Error codes defined in <span class="tt">AEEStdErr.h</span> in case of other failures.</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Both input and output buffers must be properly allocated and aligned. The function assumes the input matrix follows the exact HMX activation layout as produced by NPU ui8i8 matrix multiplication operations.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>The caller is responsible for ensuring that both buffers have sufficient space for the matrix data. Buffer overruns will result in undefined behavior. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- HTML footer for doxygen 1.14.0-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Copyright (c) Qualcomm Technologies, Inc. and/or its subsidiaries.</li>
  </ul>
</div>
</body>
</html>
